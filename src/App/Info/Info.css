/* ============= Card basics / shared ============= */
.card { background-color: #f1f1f1; }

.card-header-row{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  margin-bottom:.25rem;
}
.card-header-row .card-title{ line-height:1.15; margin:0; }

:root { --section-title-size: 1.25rem; }
.section-title{ font-size:var(--section-title-size); line-height:1.2; margin:0; font-weight:600; }
.section-title__break{ display:block; }
.section-title{ line-height:1.1; }

.top-row .card > .card-body { padding:.5rem; }

/* ============= Recent card with QR (container-queried) ============= */

/* The card-body is the container we query */
.card-body--with-qr{
  position: relative;
  display: flex;
  flex-direction: column;

  /* keep title from running under the overlay */
  --qr-w:56px; --qr-gap:8px; --cta-pad:10px;

  /* container query root */
  container-type: inline-size;
  container-name: recentqr;    /* we query this by name */

  /* DEFAULT = side-by-side (desktop) */
  --qr-layout: row;            /* .qr-cta flex-direction */
  --qr-right-dir: row;         /* arrow+QR group direction */
  --qr-wrap: nowrap;           /* text wrapping */
  --qr-text-align: right;      /* text alignment */
  --qr-max: 52%;               /* overlay max-width */
  --qr-arrow: inline-block;    /* show arrow */
}

/* keep title clear of overlay */
.card-header-row{
  padding-right: calc(var(--qr-w) + var(--qr-gap) + var(--cta-pad));
}

/* overlay uses the variables above */
.card-body--with-qr .qr-cta{
  position: absolute;
  top: 8px; right: 8px;
  display: flex; gap: 10px; align-items: flex-start;
  flex-direction: var(--qr-layout) !important;
  max-width: var(--qr-max) !important;
  z-index: 11;
}
.card-body--with-qr .qr-cta__right{
  display: flex; gap: 8px; align-items: center;
  flex-direction: var(--qr-right-dir) !important;
}
.card-body--with-qr .qr-cta__text{
  display: flex; flex-direction: column;
  white-space: var(--qr-wrap) !important;
  text-align: var(--qr-text-align) !important;
  line-height: 1.15;
  font-size: clamp(0.70rem, 0.9vw, 0.92rem);
}
.card-body--with-qr .qr-cta__arrow{
  width: 16px; height: 16px; margin-top: 2px; color: #1B5E20;
  display: var(--qr-arrow) !important;
}
.card-body--with-qr .qr-code-title{ width: 56px; height: auto; }

/* keep the green formatting always */
.card-body--with-qr .qr-cta__lead{
  font-style: italic; font-weight: 600; color: #1B5E20; margin-bottom: 2px;
}
.card-body--with-qr .qr-cta__action,
.card-body--with-qr .qr-cta__action:link,
.card-body--with-qr .qr-cta__action:visited{
  font-weight: 800; color: #1B5E20;
  text-decoration: underline; text-underline-offset: 2px; text-decoration-thickness: 0.08em;
}

/* allow wrapping earlier but keep side-by-side */
@container recentqr (max-width: 820px){
  .card-body--with-qr .qr-cta{ --qr-wrap: normal; }
}

/* -------- STACK BAND (edit these two numbers) --------
   In this card-width range the text goes UNDER the QR and the arrow hides. */
@container recentqr (min-width: 99px) and (max-width: 317px){
  .card-body--with-qr .qr-cta{
    --qr-layout: column-reverse;  /* QR on top, text below */
    --qr-right-dir: column;
    --qr-wrap: normal;
    --qr-text-align: center;
    --qr-max: 44%;
    --qr-arrow: none;             /* hide arrow when stacked */

    /* NEW: keep the whole stack hugged to the right edge */
    align-items: flex-end !important;
    right: 8px;                   /* ensure it's anchored to the right */
  }

  /* NEW: make sure the QR group itself sits on the right edge too */
  .card-body--with-qr .qr-cta__right{
    align-self: flex-end;
    align-items: center;          /* keep QR centered in its mini-column */
    gap: 6px;
  }

  /* keep text tidy under the QR (formatting preserved) */
  .card-body--with-qr .qr-cta__text{
    max-width: 12rem;
    text-align: center !important;
    white-space: normal !important;
  }
}


/* (Optional) debug outline to see when the stack band is active */
/*
@container recentqr (min-width: 600px) and (max-width: 980px){
  .card-body--with-qr .qr-cta{ outline: 2px dashed #1B5E20; }
}
*/
